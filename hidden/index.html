<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
  <!-- Metadata -->
  <meta charset="utf-8" />
  <meta name="author" content="Jacob Strieb" />
  <meta name="description" content="Stwórz ukryte, zaszyfrowane zakładki dzięki szyfrowaniu linków." />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

  <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">

  <title>Stwórz ukrytą zakładkę</title>

  <!-- Styles -->
  <link rel="stylesheet" href="../style.css" type="text/css" />

  <!-- Scripts -->
  <script type="text/javascript" src="../b64.js"></script>
  <script type="text/javascript" src="../api.js"></script>
  <script type="text/javascript" src="hidden.js"> </script>
</head>

<body onload="main()">
  <!-- View on GitHub ribbon -->
  <a href="https://github.com/jstrieb/link-lock" class="github-corner" aria-label="Zobacz na Githubie"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

  <!-- Explanation for those who do not have JavaScript enabled -->
  <noscript>
    <div style="border: 3px solid red; padding: 2em;">
      <p>Jeśli to widzisz, oznacza to, że masz wyłączoną obsługę JavaScript.
         W rezultacie aplikacja nie będzie u Ciebie poprawnie działać. 
         Na przykład, żaden z przycisków nie będzie działał.</p>
      <p>Ta aplikacja jest w całości zaprogramowana w JavaScript. 
        Zostało to zrobione celowo, aby całe szyfrowanie i deszyfrowanie odbywało się po stronie klienta. 
        Oznacza to, że kod działa jako aplikacja rozproszona, opierając się jedynie na infrastrukturze GitHub Pages. 
        Oznacza to również, że żadne dane o zaszyfrowanych linkach nie są i nigdy nie będą przechowywane na serwerze. 
        Oprócz tego kod jest zaprojektowany tak, aby można było go sprawdzić. Dzięki czemu użytkownicy mogą zbadać, co dzieje się za kulisami.</p>
      <p>Jeśli nadal chcesz uruchomić aplikację, zachęcam do sklonowania <a href="https://github. com/jstrieb/link-lock">
        kodu źródłowego na GitHubie</a>. W ten sposób można wyłączyć JavaScript tylko dla zaufanych plików na lokalnym komputerze.</p>
    </div>
    </noscript>

  <!-- Display errors in a big red box -->
  <div class="error red-border" style="display: none">
    <p id="errortext">Błąd</p>
    <button onclick="main()">Spróbuj ponownie</button>
    <a href="https://jstrieb.github.io/link-lock"><button>Zaszyfruj link</button></a>
  </div>

  <h1>Stwórz ukrytą zakładkę</h1>
  <p>Możliwe jest zabezpieczenie zakładek hasłem za pomocą <a href="https://jstrieb. github. io/link-lock" target="_blank">Link Lock</a>, 
    ale link wymagający hasła może wydać się podejrzany komuś, kto go zobaczy. 
    Ukryte zakładki rozwiązują ten problem.</p>
  <p>Ukryte zakładki wyglądają tak samo jak zwykłe zakładki, z jednym wyjątkiem: kliknięcie ich w odpowiedniej kolejności otwiera ukryty link. 
    <b> Aby otworzyć ukryte łącze, należy najpierw kliknąć ukrytą zakładkę, a następnie odszyfrować zakładkę. </b> 
    Ta sama zakładka deszyfrująca działa dla wszystkich ukrytych zakładek.</p>
  <p>Przeczytaj o tym w jaki sposób działają ukryte zakładki <a target="_blank" href="https://jstrieb.github.io/projects/hidden-bookmarks/">tutaj (w języku angielskim)</a>.</p>

  <p>Oto jak stworzyć ukrytą zakładkę:</p>
  <ol>
    <li>
      <a href="https://jstrieb.github.io/link-lock">Dodaj hasło do ukrytego linku</a>, jeśli jeszcze tego nie zrobiłeś.
    </li>
    <li>
      Przeciągnij poniższą zakładkę "odszyfruj" na swój pasek zakładek.

      <ul><li style="margin-bottom: 0.5em;">Kliknięcie zakładki deszyfrującej prowadzi do <code>gmail.com</code>, 
        chyba że bieżąca strona jest ukrytym linkiem. Użyj opcji "zaawansowanych", aby zamiast tego wpisać inny adres.
      </li></ul>

      <style>
        #advanced-label {
          margin-top: 0em;
        }

        .advanced p {
          margin-top: 0;
          margin-bottom: 0.5em;
        }
      </style>
      <details>
        <summary id="advanced-label">zaawansowane</summary>
        <div class="advanced" id="advanced">
          <!--
          <p>Input a new location decoy location for the decrypt bookmark:</p>
          -->
          <label for="decrypt-bookmark-disguise">lokalizacja wabika dla zakładki deszyfrowania</label>
          <div class="inline-button-container">
          <input type="text" id="decrypt-bookmark-disguise" value="https://gmail.com" />
          <button onclick="onChangeDecrypt()">Zmień lokalizację</button>
          <div>
        </div>
      </details>

      <p><a class="bookmark" id="decrypt-bookmark" onclick="return false;" href='javascript:(() => {
var b64 = (() => {
  function generateIndexDict(a) {
    let result = {};
    for (let i = 0; i < a.length; i++) {
      result[a[i]] = i;
    }
    return result;
  }

  const _a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  const _aRev = generateIndexDict(_a);
  _aRev["-"] = _aRev["+"];
  _aRev["_"] = _aRev["/"];

  const _enc = new TextEncoder("utf-8");
  const _dec = new TextDecoder("utf-8");

  return {

    decode: function(s) {
      return this.binaryToAscii(this.base64ToBinary(s));
    },

    encode: function(s) {
      return this.binaryToBase64(this.asciiToBinary(s));
    },

    asciiToBinary: function(text) {
      return _enc.encode(text);
    },


    binaryToAscii: function(binary) {
      return _dec.decode(binary);
    },


    binaryToBase64: function(originalBytes) {
      let length = originalBytes.length;
      let added = (length % 3 == 0) ? 0 : (3 - length % 3);
      let bytes = new Uint8Array(length + added);
      bytes.set(originalBytes);

      let output = "";
      for (let i = 0; i < bytes.length; i += 3) {
        output += _a[ bytes[i] >>> 2 ];
        output += _a[ ((bytes[i] & 0x3) << 4) | (bytes[i + 1] >>> 4) ];
        output += _a[ ((bytes[i + 1] & 0xF) << 2) | (bytes[i + 2] >>> 6) ];
        output += _a[ bytes[i + 2] & 0x3F ];
      }

      if (added > 0) {
        output = output.slice(0, -added) + ("=".repeat(added));
      }

      return output;
    },

    base64ToBinary: function(s) {
      let bytes = [];

      if (s.length % 4 == 1) {
        throw "Invalid base64 input";
      } else if (s.length % 4 != 0) {
        s += "=".repeat(4 - (s.length % 4));
      }

      for (let i = 0; i <= (s.length - 4); i += 4) {
        for (let j = 0; j < 4; j++) {
          if (s[i + j] != "=" && !(s[i + j] in _aRev)) {
            throw "Invalid base64 input";
          } else if (s[i + j] == "=" && Math.abs(s.length - (i + j)) > 2) {
            throw "Invalid base64 input";
          }
        }

        bytes.push((_aRev[s[i]] << 2) | (_aRev[s[i + 1]] >>> 4));
        if (s[i + 2] != "=") {
          bytes.push(((_aRev[s[i + 1]] & 0xF) << 4) | (_aRev[s[i + 2]] >>> 2));
        }
        if (s[i + 3] != "=") {
          bytes.push(((_aRev[s[i + 2]] & 0x3) << 6) | _aRev[s[i + 3]]);
        }
      }

      return new Uint8Array(bytes);
    }

  }
})();

const hash = window.location.hash.slice(1);
try {
  const decoded = b64.decode(hash);
  const params = JSON.parse(decoded);
  if (params.unencrypted) {
    window.location.href = params.url;
  } else {
    window.location.href = "https://jstrieb.github.io/link-lock/" + window.location.hash;
  }
} catch {
  window.location.replace("https://gmail.com");
}

})();'>Odszyfruj</a></p>
    </li>
    <li>Dobrym pomysłem może być zmiana nazwy zakładki deszyfrowania na "Gmail" poprzez kliknięcie prawym przyciskiem myszy i kliknięcie "Edytuj" lub "Właściwości"</li>
    <li>
      Wypełnij ukryty adres URL poniżej (jeśli nie jest jeszcze wypełniony). Następnie wpisz ukrytą nazwę zakładki i link.
      <ul><li>Kliknij w przycisk do generowania losowych linków ukrycia, jeśli nie masz pomysłu na własny.</li></ul>
    </li>
    <li>Naciśnij przycisk , aby utworzyć zakładkę. Po utworzeniu przeciągnij ukrytą zakładkę na swój pasek zakładek.</li>
  </ol>
  <hr />

  <div class="form">
    <label for="encrypted-url">ukryty link</label>
    <input type="url" id="encrypted-url" oninput="document.querySelector('.alert').style.opacity = 0" />
    <label for="bookmark-title">nazwa ukrytej zakładki</label>
    <input type="text" id="bookmark-title" />
    <label for="bookmark-url">adres url ukrytej zakładki</label>
    <input type="url" id="bookmark-url" required />
    <button onclick="onHide()">Stwórz ukrytą zakładkę</button>
    <button onClick="randomLink()">Wylosuj link ukrycia</button>
    <p class="alert">NIEWIDOCZNA</p>
  </div>

  <hr />

  <!-- Output area -->
  <style>
    .output label[for="output"] {
      margin-bottom: 1em;
    }
  </style>
  <div class="output">
    <label for="output">wynik</label>
    <!-- (Leg) disabled (by acid) -->
    <a class="bookmark" href="" onclick="return false;" aria-disabled="true" id="output">Nie stworzyłeś jeszcze żadnej ukrytej zakładki</a>
    <p>Przeciągnij ukrytą zakładkę na pasek zakładek powyżej.</p>
    <p>Aby uzyskać dostęp do ukrytego linku, należy kliknąć ukrytą zakładkę, a następnie zakładkę do odszyfrowania (której nazwa mogła zostać zmieniona na "Gmail").</p>
  </div>

  <!-- Page footer -->
  <footer>
  <hr />
  <p class="copyright">Stworzona przez <a href="https://jstrieb.github.io">Jacoba Strieba</a>, tłumaczenie <a href="https://github.com/YourSenseiCreeper">YourSenseiCreeper</a>.</p>
  </footer>
</body>
</body>

</html>
